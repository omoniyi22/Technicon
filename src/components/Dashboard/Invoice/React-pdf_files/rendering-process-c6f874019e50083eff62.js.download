_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[21],{SMFc:function(e,n,t){"use strict";t.r(n);var i=t("wx14"),o=t("Ff2n"),a=t("q1tI"),r=t.n(a),c=t("7ljp"),s=t("VQoI"),l=t("h4VS"),u=t("vOnD"),p=t("SXSQ"),h=t("/heH"),b=r.a.createElement;function d(){var e=Object(l.a)(["\n    width: 175%;\n    font-size: 12px;\n    top: ",";\n    bottom: ",";\n  "]);return d=function(){return e},e}function m(){var e=Object(l.a)(["\n    width: 150%;\n    font-size: 15px;\n  "]);return m=function(){return e},e}function f(){var e=Object(l.a)(["\n  width: 125%;\n  padding: 8px;\n  position: absolute;\n  text-align: center;\n  border-radius: 6px;\n  color: white;\n  background: ",";\n  top: ",";\n  bottom: ",";\n  ","\n  ","\n"]);return f=function(){return e},e}function g(){var e=Object(l.a)(["\n    width: 32px;\n    height: 32px;\n  "]);return g=function(){return e},e}function w(){var e=Object(l.a)(["\n  width: 45px;\n  height: 45px;\n  color: white;\n  z-index: 100;\n  display: flex;\n  border-radius: 50%;\n  align-items: center;\n  justify-content: center;\n  background: ",";\n  ","\n"]);return w=function(){return e},e}function v(){var e=Object(l.a)(["\n      height: 50px;\n    "]);return v=function(){return e},e}function j(){var e=Object(l.a)(["\n  flex: 1;\n  float: left;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n\n  &:before {\n    width: 0px;\n    content: '';\n    height: 60px;\n    display: block;\n    position: absolute;\n    border: ",";\n    top: ",";\n    bottom: ",";\n\n    ","\n  }\n"]);return j=function(){return e},e}function O(){var e=Object(l.a)(["\n    padding: 0px 20px;\n  "]);return O=function(){return e},e}function x(){var e=Object(l.a)(["\n  height: 4px;\n  display: flex;\n  position: relative;\n  margin: 184px 0px;\n  list-style: none;\n  background: ",";\n\n  &:before {\n    content: '';\n    right: -4px;\n    border: 10px solid transparent;\n    border-radius: 3px;\n    border-right: 0;\n    border-left: ",";\n    position: absolute;\n    top: -8px;\n    width: 0;\n    height: 0;\n    display: block;\n  }\n\n  ","\n"]);return x=function(){return e},e}var y=u.c.ol(x(),(function(e){return e.theme.black}),(function(e){var n=e.theme;return"20px solid ".concat(n.black)}),h.a.tablet(O())),k=u.c.li(j(),(function(e){var n=e.theme;return"1px dashed ".concat(n.black)}),(function(e){return"bottom"===e.position?"20px":null}),(function(e){return"top"===e.position?"20px":null}),h.a.phone(v())),T=u.c.div(w(),(function(e){return e.theme.red}),h.a.phone(g())),N=u.c.p(f(),(function(e){return e.theme.black}),(function(e){return"bottom"===e.position?"60px":null}),(function(e){return"top"===e.position?"60px":null}),h.a.tablet(m()),h.a.phone(d(),(function(e){return"bottom"===e.position?"50px":null}),(function(e){return"top"===e.position?"50px":null}))),F=function(e){var n=e.icon,t=e.iconLabel,i=e.position,o=e.children;return b(k,{position:i},b(N,{position:i},o),b(T,null,b(p.a,{type:n,label:t})))},_=function(){return b(y,null,b(F,{position:"top",icon:"cogs",iconLabel:""},"Internal structures creation"),b(F,{position:"bottom",icon:"file",iconLabel:""},"PDF document creation & metadata"),b(F,{position:"top",icon:"download",iconLabel:""},"Fetching assets"),b(F,{position:"bottom",icon:"copy",iconLabel:""},"Wrapping pages"),b(F,{position:"top",icon:"paint-brush",iconLabel:""},"Rendering"),b(F,{position:"bottom",icon:"save",iconLabel:""},"Finish document"))},D=t("DYnM"),E=(r.a.createElement,{}),L="wrapper";function S(e){var n=e.components,t=Object(o.a)(e,["components"]);return Object(c.b)(L,Object(i.a)({},E,t,{components:n,mdxType:"MDXLayout"}),Object(c.b)(s.a,{to:"https://github.com/react-pdf/site/blob/master/docs/rendering-process.md",mdxType:"EditButton"}),Object(c.b)("h2",null,"Rendering process overview"),Object(c.b)("p",null,"At a high level, the document creation process is composed by 6 concrete steps."),Object(c.b)(_,{mdxType:"OverviewTimeline"}),Object(c.b)("h3",null,"1. Internal structures creation"),Object(c.b)("p",null,"The first step involves transforming the ",Object(c.b)("em",{parentName:"p"},"React element tree")," into the appropriate internal instances for each component type. This involves saving the relationship between these (parent-child), parsing styles and processing props."),Object(c.b)("p",null,"Besides ",Object(c.b)("strong",{parentName:"p"},"Document"),", all nodes will represent a block inside a document, with a height, width, paddings and margins (yet to be discovered). These instances also define how each element wraps in the page, how their dimensions are calculated, and finally, how they get rendered in the document."),Object(c.b)("p",null,"From now on, react-pdf works over this data structure to start inferring where each block goes inside the final document."),Object(c.b)("h3",null,"2. PDF document creation & metadata"),Object(c.b)("p",null,"The creation of the PDF document itself. For this task, we use the awesome ",Object(c.b)("a",Object(i.a)({parentName:"p"},{href:"https://github.com/devongovett/pdfkit"}),"pdfkit"),"."),Object(c.b)("p",null,"This instance is then passed down to each node in the tree, that they will use it eventually to render themselves further in this process."),Object(c.b)("p",null,"This step also involves adding any defined metadata to the final document."),Object(c.b)("h3",null,"3. Fetching assets"),Object(c.b)("p",null,"Time to ask for all needed resources! We traverse the internal element's tree fetching any required ",Object(c.b)("em",{parentName:"p"},"font"),", ",Object(c.b)("em",{parentName:"p"},"image")," or ",Object(c.b)("em",{parentName:"p"},"emoji"),"."),Object(c.b)("p",null,"We run all these requests asynchronously, but we won't move forward until all requests are finished (with success or failure)."),Object(c.b)("h3",null,"4. Wrapping pages"),Object(c.b)("p",null,"Now that we have all fonts loaded, we can layout text and calculate how much space each glyph will take. The same goes for images: now that we have their data, we can read it and know beforehand how to scale the image for the available bounding box in we want to render it."),Object(c.b)("p",null,"This is the most time-consuming step, since it involves not just calculating where each element is in the document and how much space it will need, but also splitting these elements into different pages."),Object(c.b)("h3",null,"5. Rendering"),Object(c.b)("p",null,"At this point we have every element\u2019s dimensions, and in on which page they are. All we have to do now is performing the actual rendering on the document created in step 2, by calling the ",Object(c.b)("em",{parentName:"p"},"render")," method in each instance recursively."),Object(c.b)("h3",null,"6. Finish document"),Object(c.b)("p",null,"Once in this stage, we have a valid PDF document instance with a bunch of stuff in it. All it remains is deciding what we want to do with this data. This will vary depending on the binding you are using, but basically it means either displaying or saving it."),Object(c.b)(D.a,{backSrc:"/",backText:"Quick start guide",nextSrc:"/components",nextText:"Components",mdxType:"NavigationButtons"}))}S.isMDXComponent=!0;n.default=S},o65G:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/rendering-process",function(){return t("SMFc")}])}},[["o65G",2,1,0,3,4]]]);